  {% extends 'pedidos/base.html' %}
  {% load static %}
  {% block content %}

  <div class="container">
    <h1>Lista de Produtos</h1>
    <div class="product-grid">
      {% for produto in produtos %}
      <div class="product-item">
        <a href="{% url 'detalhes_produto' produto.id %}">
          <div class="col-md-6">
            {% if produto.imagem_set.all %}
            <div id="carousel-{{ produto.id }}" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                {% for imagem in produto.imagem_set.all %}
                <li data-target="#carousel-{{ produto.id }}" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></li>
                {% endfor %}
              </ol>
              <div class="carousel-inner">
                {% for imagem in produto.imagem_set.all %}
                <div class="carousel-item{% if forloop.first %} active{% endif %}">
                  <img class="d-block w-100" src="{{ imagem.imagem.url }}" alt="{{ produto.produto }}">
                </div>
                {% endfor %}
              </div>
              <a class="carousel-control-prev" href="#carousel-{{ produto.id }}" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Anterior</span>
              </a>
              <a class="carousel-control-next" href="#carousel-{{ produto.id }}" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Próximo</span>
              </a>
            </div>
            {% else %}
            <p>Este produto não tem imagem associada</p>
            {% endif %}
          </div>
        </a>
      </div>
    {% endfor %}    
          
          <div class="product-info">
            <h2>{{ produto.produto }}</h2>
            <p>{{ produto.descricao }}</p>
            <p>Preço: R$ {{ produto.preco }}</p>
          </div>
        </a>
      </div>
    </div>
  </div>

  {% endblock %}
